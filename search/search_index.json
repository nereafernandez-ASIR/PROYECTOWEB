{"config":{"lang":["es"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Introducci\u00f3n a LayerHub","text":"<p>LayerHub es una plataforma integral dise\u00f1ada para la gesti\u00f3n de recursos en el \u00e1mbito de la impresi\u00f3n 3D. El sistema integra un entorno de comercio electr\u00f3nico para la adquisici\u00f3n de hardware y materiales con una secci\u00f3n comunitaria para el intercambio de modelos STL y contenido educativo.</p>"},{"location":"#objetivos-del-proyecto","title":"Objetivos del Proyecto","text":"<p>El desarrollo ha sido orientado hacia la creaci\u00f3n de una infraestructura robusta y escalable que cumpla con los siguientes est\u00e1ndares:</p> <ul> <li>Arquitectura Modular: Separaci\u00f3n clara entre la l\u00f3gica del backend (PHP) y la interfaz est\u00e9tica (CSS/JS).</li> <li>Gesti\u00f3n de Datos Centralizada: Uso de SQLite para una persistencia eficiente y de baja latencia.</li> <li>Seguridad Multi-capa: Implementaci\u00f3n de controles de acceso basados en roles y validaciones estrictas de servidor.</li> <li>Interactividad Social: Sistemas de seguimiento, valoraciones y feedback din\u00e1mico.</li> </ul>"},{"location":"#stack-tecnologico","title":"Stack Tecnol\u00f3gico","text":"<p>El portal ha sido desarrollado utilizando las siguientes tecnolog\u00edas de grado industrial:</p> Capa Tecnolog\u00eda Descripci\u00f3n Backend PHP 8.1+ L\u00f3gica de servidor y controladores de datos. Base de Datos SQLite 3 Base de datos relacional integrada. Frontend Vanilla JS / CSS3 Interfaz de usuario sin dependencias pesadas. Seguridad BCRYPT / PDO Encriptaci\u00f3n de credenciales y prevenci\u00f3n de SQLi."},{"location":"#estructura-de-la-documentacion","title":"Estructura de la Documentaci\u00f3n","text":"<p>Este portal t\u00e9cnico se divide en las siguientes secciones para facilitar su consulta:</p> <ol> <li>Arquitectura del Sistema: Descripci\u00f3n de la organizaci\u00f3n de archivos y flujo de datos.</li> <li>Modelo de Datos: Esquema relacional, tablas y l\u00f3gica de base de datos.</li> <li>L\u00f3gica Especializada: An\u00e1lisis de c\u00f3digo de funcionalidades cr\u00edticas (Carrito, Subidas).</li> <li>Seguridad y Roles: Protocolos de autenticaci\u00f3n y niveles de acceso.</li> <li>Instalaci\u00f3n: Procedimientos de despliegue y mantenimiento.</li> </ol>"},{"location":"architecture/","title":"Arquitectura del Sistema","text":""},{"location":"architecture/#estructura-de-directorios","title":"Estructura de Directorios","text":"<p>El proyecto sigue una arquitectura MVC (Modelo-Vista-Controlador) adaptada a PHP nativo, separando claramente la l\u00f3gica de negocio, la capa de datos y la interfaz de usuario.</p> <pre><code>/\n\u251c\u2500\u2500 db/                 # Capa de Datos (SQLite)\n\u251c\u2500\u2500 php/                # L\u00f3gica de Negocio (Backend)\n\u2502   \u251c\u2500\u2500 auth/           # Controladores de Sesi\u00f3n (Login, Registro)\n\u2502   \u251c\u2500\u2500 community/      # Controladores de L\u00f3gica (Subidas, Ratings)\n\u2502   \u2514\u2500\u2500 includes/       # N\u00facleo del Sistema (Config, Session)\n\u251c\u2500\u2500 public/             # Capa de Presentaci\u00f3n (Frontend)\n\u2502   \u251c\u2500\u2500 admin/          # Vistas Privadas (Administraci\u00f3n)\n\u2502   \u251c\u2500\u2500 css/            # Hojas de Estilo\n\u2502   \u251c\u2500\u2500 js/             # Scripts de Cliente\n\u2502   \u251c\u2500\u2500 uploads/        # Almacenamiento de Archivos de Usuario\n\u2502   \u2514\u2500\u2500 index.php       # Punto de Entrada P\u00fablico\n</code></pre>"},{"location":"architecture/#interoperabilidad-php","title":"Interoperabilidad PHP","text":"<p>El sistema funciona mediante un flujo de inclusi\u00f3n de dependencias jer\u00e1rquico. Cada archivo accesible p\u00fablicamente (en <code>public/</code>) inicia su ejecuci\u00f3n cargando el n\u00facleo del sistema.</p>"},{"location":"architecture/#diagrama-de-flujo-de-carga","title":"Diagrama de Flujo de Carga","text":"<pre><code>graph TD\n    A[Public Page (Vista)] --&gt;|require_once| B[session.php]\n    B --&gt;|require_once| C[config.php]\n    C --&gt;|Database::getInstance| D[Conexi\u00f3n SQLite]\n    A --&gt;|L\u00f3gica Espec\u00edfica| E[Renderizado HTML]</code></pre>"},{"location":"architecture/#componentes-del-nucleo","title":"Componentes del N\u00facleo","text":"<ol> <li>session.php: Act\u00faa como un Middleware de autenticaci\u00f3n. Se encarga de iniciar la sesi\u00f3n de PHP, verificar si el usuario est\u00e1 bloqueado y proporcionar funciones globales como <code>isLoggedIn()</code> e <code>isAdmin()</code>.</li> <li>config.php: Contiene la configuraci\u00f3n global (<code>BASE_URL</code>, rutas), la conexi\u00f3n a base de datos (Clase <code>Database</code>) y funciones auxiliares de seguridad (<code>sanitize()</code>, <code>redirect()</code>).</li> </ol>"},{"location":"architecture/#ciclo-de-vida-de-una-peticion-request-response","title":"Ciclo de Vida de una Petici\u00f3n (Request-Response)","text":"<ol> <li>Petici\u00f3n: El navegador solicita <code>public/tienda.php</code>.</li> <li>Inicializaci\u00f3n: Se carga el n\u00facleo (<code>session.php</code> + <code>config.php</code>).</li> <li>Verificaci\u00f3n: Se comprueba si existe una sesi\u00f3n v\u00e1lida.</li> <li>Consulta: La vista solicita datos a la BD mediante <code>getDB()</code>.</li> <li>Renderizado: PHP genera el HTML din\u00e1mico inyectando los datos.</li> <li>Respuesta: El servidor env\u00eda el documento HTML final al cliente.</li> </ol>"},{"location":"database/","title":"Infraestructura de Datos","text":"<p>El sistema de persistencia se basa en SQLite 3, gestionado a trav\u00e9s de la interfaz PDO de PHP. Este dise\u00f1o garantiza la integridad referencial y permite transacciones ACID.</p>"},{"location":"database/#esquema-relacional-completo","title":"Esquema Relacional Completo","text":"<p>A continuaci\u00f3n se detalla la estructura de todas las tablas del sistema, incluyendo sus claves primarias (PK), for\u00e1neas (FK) y restricciones de integridad.</p> <pre><code>erDiagram\n    USERS ||--o{ ORDERS : \"1:N\"\n    USERS ||--o{ POSTS : \"1:N\"\n    USERS ||--o{ REVIEWS : \"1:N\"\n    USERS ||--o{ CART : \"1:N\"\n    PRODUCT ||--o{ ORDER_ITEMS : \"1:N\"\n    PRODUCT ||--o{ CART : \"1:N\"\n    ORDER ||--o{ ORDER_ITEMS : \"1:N\"\n    POST ||--o{ COMMENT : \"1:N\"\n    POST ||--|{ STL_FILE : \"1:1\"</code></pre>"},{"location":"database/#1-tabla-users-usuarios","title":"1. Tabla <code>users</code> (Usuarios)","text":"<p>Almacena las credenciales y perfiles de todos los actores del sistema.</p> Campo Tipo Restricciones Descripci\u00f3n <code>id</code> INTEGER PK, AUTOINCREMENT Identificador \u00fanico. <code>username</code> TEXT UNIQUE, NOT NULL Nombre de usuario para login. <code>password</code> TEXT NOT NULL Hash BCRYPT de la contrase\u00f1a. <code>role</code> TEXT CHECK('user', 'admin') Nivel de acceso. <code>blocked</code> INTEGER DEFAULT 0 Flag de bloqueo (1=Bloqueado)."},{"location":"database/#2-tabla-products-catalogo","title":"2. Tabla <code>products</code> (Cat\u00e1logo)","text":"<p>Inventario de art\u00edculos f\u00edsicos disponibles en la tienda.</p> Campo Tipo Restricciones Descripci\u00f3n <code>id</code> INTEGER PK, AUTOINCREMENT Identificador de producto. <code>title</code> TEXT NOT NULL Nombre comercial. <code>price</code> REAL NOT NULL Precio unitario. <code>stock</code> INTEGER DEFAULT 0 Cantidad disponible."},{"location":"database/#3-tabla-orders-y-order_items-ventas","title":"3. Tabla <code>orders</code> y <code>order_items</code> (Ventas)","text":"<p>Estructura maestro-detalle para registrar las transacciones.</p> <ul> <li>orders: Cabecera del pedido (Usuario, Fecha, Total).</li> <li>order_items: L\u00edneas de detalle (Producto, Cantidad, Precio Hist\u00f3rico).</li> </ul>"},{"location":"database/#4-tablas-de-comunidad-stl-y-tutoriales","title":"4. Tablas de Comunidad (STL y Tutoriales)","text":""},{"location":"database/#tabla-stl_files","title":"Tabla <code>stl_files</code>","text":"<p>Almacena la referencia a los archivos 3D subidos.</p> Campo Tipo Restricciones Descripci\u00f3n <code>user_id</code> INTEGER FK -&gt; users.id Creador del archivo. <code>file_path</code> TEXT NOT NULL Ruta f\u00edsica en servidor. <code>status</code> TEXT 'pending'/'approved' Estado de moderaci\u00f3n."},{"location":"database/#tabla-tutorials","title":"Tabla <code>tutorials</code>","text":"<p>Gesti\u00f3n h\u00edbrida de contenido educativo.</p> Campo Tipo Descripci\u00f3n <code>video_url</code> TEXT URL de YouTube o ruta local de archivo MP4. <code>status</code> TEXT Estado de moderaci\u00f3n."},{"location":"database/#tabla-ratings-valoraciones","title":"Tabla <code>ratings</code> (Valoraciones)","text":"<p>Sistema de feedback con restricci\u00f3n de unicidad (un usuario solo puede valorar una vez cada \u00edtem).</p> Campo Tipo Restricciones <code>user_id</code> INTEGER FK -&gt; users.id <code>stl_id</code> INTEGER FK -&gt; stl_files.id <code>rating</code> INTEGER CHECK(1-5)"},{"location":"database/#tabla-user_follows-seguidores","title":"Tabla <code>user_follows</code> (Seguidores)","text":"<p>Relaci\u00f3n reflexiva N:M que permite a los usuarios suscribirse a creadores. PKey compuesta <code>(follower_id, following_id)</code>.</p>"},{"location":"features/","title":"An\u00e1lisis de C\u00f3digo y Funcionalidades Cr\u00edticas","text":"<p>En esta secci\u00f3n se detalla la implementaci\u00f3n t\u00e9cnica de los procesos m\u00e1s complejos del backend de LayerHub.</p>"},{"location":"features/#sistema-de-gestion-de-carrito","title":"Sistema de Gesti\u00f3n de Carrito","text":"<p>La l\u00f3gica del carrito se sincroniza directamente con la base de datos para garantizar la disponibilidad de los productos y la persistencia de la sesi\u00f3n.</p>"},{"location":"features/#recuperacion-de-productos","title":"Recuperaci\u00f3n de Productos","text":"<p>A continuaci\u00f3n se muestra el c\u00f3digo utilizado para obtener los elementos del carrito vinculando la informaci\u00f3n de stock y precio:</p> <pre><code>$stmt = $db-&gt;prepare(\"\n    SELECT c.*, p.title, p.price, p.image, p.stock \n    FROM cart c \n    JOIN products p ON c.product_id = p.id \n    WHERE c.user_id = ?\n    ORDER BY c.added_at DESC\n\");\n$stmt-&gt;execute([$user['id']]);\n$cartItems = $stmt-&gt;fetchAll();\n</code></pre>"},{"location":"features/#procesamiento-de-subida-de-archivos-stl","title":"Procesamiento de Subida de Archivos STL","text":"<p>La subida de archivos 3D requiere validaciones estrictas de tama\u00f1o, extensi\u00f3n y tipo MIME para prevenir la ejecuci\u00f3n de c\u00f3digo malicioso.</p>"},{"location":"features/#logica-de-validacion-de-seguridad","title":"L\u00f3gica de Validaci\u00f3n de Seguridad","text":"<p>El controlador realiza una comprobaci\u00f3n triple (Extensi\u00f3n, Tama\u00f1o y MIME real v\u00eda <code>finfo</code>):</p> <pre><code>$finfo = finfo_open(FILEINFO_MIME_TYPE);\n$mime = finfo_file($finfo, $file['tmp_name']);\nfinfo_close($finfo);\n\nif (!in_array($mime, $allowedMime)) {\n    if ($mime !== 'application/octet-stream' &amp;&amp; $mime !== 'text/plain') {\n        setFlash('Contenido no v\u00e1lido', 'error');\n        redirect('/public/comunidad.php');\n    }\n}\n</code></pre>"},{"location":"features/#gestion-de-contenido-multimedia-tutoriales","title":"Gesti\u00f3n de Contenido Multimedia (Tutoriales)","text":"<p>El sistema de tutoriales admite un flujo h\u00edbrido: carga directa de video (.mp4) o vinculaci\u00f3n de enlaces externos (YouTube).</p>"},{"location":"features/#control-de-flujo-de-video","title":"Control de Flujo de Video","text":"<p>El c\u00f3digo prioriza la subida f\u00edsica del archivo si este existe y cumple los requisitos t\u00e9cnicos:</p> <pre><code>if (isset($_FILES['video_file']) &amp;&amp; $_FILES['video_file']['error'] === UPLOAD_ERR_OK) {\n    // Proceso de validaci\u00f3n de MP4 y almacenamiento f\u00edsico\n    $fileName = uniqid('video_') . '.mp4';\n    $uploadPath = __DIR__ . '/../../uploads/users/videos/' . $fileName;\n    move_uploaded_file($file['tmp_name'], $uploadPath);\n} else if (!empty($videoUrl)) {\n    // Almacenamiento de referencia externa a YouTube\n    $finalVideoSource = $videoUrl;\n}\n</code></pre>"},{"location":"features/#moderacion-de-contenido","title":"Moderaci\u00f3n de Contenido","text":"<p>Toda contribuci\u00f3n comunitaria queda marcada con el estado <code>status = 'pending'</code>. Este mecanismo asegura que ning\u00fan contenido sea p\u00fablico sin la revisi\u00f3n manual del administrador, cuya l\u00f3gica se encuentra centralizada en los controladores de administraci\u00f3n de la plataforma.</p>"},{"location":"features_admin/","title":"An\u00e1lisis Funcional: M\u00f3dulos de Administraci\u00f3n","text":"<p>Este documento describe las funcionalidades exclusivas del panel de administraci\u00f3n, protegido por el middleware de seguridad <code>requireAdmin()</code>.</p>"},{"location":"features_admin/#1-crud-de-productos-publicadminproductosphp","title":"1. CRUD de Productos (<code>public/admin/productos.php</code>)","text":"<p>El n\u00facleo de la gesti\u00f3n de la tienda permite crear, leer, actualizar y eliminar productos.</p>"},{"location":"features_admin/#proteccion-de-acceso","title":"Protecci\u00f3n de Acceso","text":"<p>Antes de ejecutar cualquier l\u00f3gica, el sistema verifica el rol:</p> <pre><code>require_once __DIR__ . '/../../php/includes/session.php';\nrequireAdmin(); // Detiene la ejecuci\u00f3n si el rol != 'admin'\n</code></pre>"},{"location":"features_admin/#logica-de-insercionactualizacion","title":"L\u00f3gica de Inserci\u00f3n/Actualizaci\u00f3n","text":"<p>El sistema utiliza sentencias preparadas para modificar el cat\u00e1logo.</p> <pre><code>if ($action === 'create') {\n    $stmt = $db-&gt;prepare(\"INSERT INTO products (title, price, stock, category) VALUES (?, ?, ?, ?)\");\n    $stmt-&gt;execute([$title, $price, $stock, $category]);\n}\n</code></pre>"},{"location":"features_admin/#2-sistema-de-moderacion-publicadminmoderar_stlphp","title":"2. Sistema de Moderaci\u00f3n (<code>public/admin/moderar_stl.php</code>)","text":"<p>Esta interfaz act\u00faa como un \"sem\u00e1foro\" para el contenido generado por el usuario (UGC). Permite cambiar el estado de <code>pending</code> a <code>approved</code> o <code>rejected</code>.</p>"},{"location":"features_admin/#flujo-de-aprobacion","title":"Flujo de Aprobaci\u00f3n","text":"<p>El administrador visualiza una lista de pendientes y ejecuta una acci\u00f3n que actualiza la base de datos:</p> <pre><code>// Al aprobar un archivo\n$stmt = $db-&gt;prepare(\"UPDATE stl_files SET status = 'approved' WHERE id = ?\");\n$stmt-&gt;execute([$id]);\n\n// Notificaci\u00f3n (Opcional)\n// El sistema podr\u00eda disparar una notificaci\u00f3n al usuario informando la aprobaci\u00f3n.\n</code></pre> <p>Impacto en el Sistema: Solo los registros con <code>status = 'approved'</code> son recuperados por las consultas SQL de la secci\u00f3n p\u00fablica (<code>comunidad.php</code>), garantizando un entorno seguro y curado.</p>"},{"location":"features_admin/#3-gestion-de-usuarios-y-bloqueos-publicadminusuariosphp","title":"3. Gesti\u00f3n de Usuarios y Bloqueos (<code>public/admin/usuarios.php</code>)","text":"<p>Permite la administraci\u00f3n de la base de usuarios, incluyendo la capacidad de revocar el acceso.</p>"},{"location":"features_admin/#logica-de-bloqueo","title":"L\u00f3gica de Bloqueo","text":"<p>El bloqueo es un \"soft-delete\" funcional. No borra al usuario, sino que establece un flag.</p> <pre><code>// Bloquear usuario\n$stmt = $db-&gt;prepare(\"UPDATE users SET blocked = 1 WHERE id = ?\");\n$stmt-&gt;execute([$userId]);\n</code></pre> <p>Este flag es verificado en cada inicio de sesi\u00f3n (<code>login.php</code>) y en cada carga de p\u00e1gina (<code>session.php</code>), expulsando al usuario inmediatamente si est\u00e1 activo.</p>"},{"location":"features_client/","title":"An\u00e1lisis Funcional: M\u00f3dulos de Cliente","text":"<p>Este documento detalla la implementaci\u00f3n t\u00e9cnica de las funcionalidades accesibles para el usuario final (rol <code>user</code>).</p>"},{"location":"features_client/#1-carrito-de-compras-publiccarritophp","title":"1. Carrito de Compras (<code>public/carrito.php</code>)","text":"<p>El carrito no utiliza cookies para almacenar productos, sino que persiste los datos en la base de datos (<code>table: cart</code>) para permitir el acceso multidispositivo.</p>"},{"location":"features_client/#logica-de-recuperacion-de-items","title":"L\u00f3gica de Recuperaci\u00f3n de Items","text":"<p>El siguiente bloque SQL realiza un <code>JOIN</code> entre la tabla <code>cart</code> y <code>products</code> para obtener toda la informaci\u00f3n necesaria en una sola consulta eficiente:</p> <pre><code>// config.php / carrito.php\n$stmt = $db-&gt;prepare(\"\n    SELECT c.*, p.title, p.price, p.image, p.stock \n    FROM cart c \n    JOIN products p ON c.product_id = p.id \n    WHERE c.user_id = ?\n    ORDER BY c.added_at DESC\n\");\n$stmt-&gt;execute([$user['id']]);\n</code></pre> <p>Explicaci\u00f3n T\u00e9cnica: 1.  Se prepara la consulta para prevenir Inyecci\u00f3n SQL. 2.  Se vinculan los datos del usuario actual (<code>$user['id']</code>). 3.  Se recuperan din\u00e1micamente el precio y stock actual (evitando guardar precios desactualizados en el carrito).</p>"},{"location":"features_client/#2-gestion-de-archivos-stl-phpcommunityupload_stlphp","title":"2. Gesti\u00f3n de Archivos STL (<code>php/community/upload_stl.php</code>)","text":"<p>Este controlador maneja la subida de archivos binarios grandes. Implementa una estrategia de validaci\u00f3n de seguridad en profundidad.</p>"},{"location":"features_client/#codigo-de-validacion-de-seguridad","title":"C\u00f3digo de Validaci\u00f3n de Seguridad","text":"<p>El sistema rechaza cualquier archivo que no cumpla estrictamente con los criterios de seguridad MIME y extensi\u00f3n.</p> <pre><code>// Verificaci\u00f3n de Tipo MIME Real\n$finfo = finfo_open(FILEINFO_MIME_TYPE);\n$mime = finfo_file($finfo, $file['tmp_name']);\nfinfo_close($finfo);\n\n// Lista blanca de tipos permitidos\n$allowedMime = [\n    'application/sla', \n    'application/octet-stream', \n    'application/zip', \n    'text/plain'\n];\n\nif (!in_array($mime, $allowedMime)) {\n    // Manejo de error y redirecci\u00f3n\n    setFlash('Archivo no v\u00e1lido', 'error');\n    redirect('/public/comunidad.php');\n}\n</code></pre> <p>Relaci\u00f3n con Base de Datos: Una vez validado el archivo f\u00edsico, se registra una entrada en la tabla <code>stl_files</code> con el estado <code>pending</code>. Esto asegura que el archivo existe en el servidor pero no es visible p\u00fablicamente hasta la aprobaci\u00f3n administrativa.</p>"},{"location":"features_client/#3-sistema-de-tutoriales-phpcommunityadd_tutorialphp","title":"3. Sistema de Tutoriales (<code>php/community/add_tutorial.php</code>)","text":"<p>Este m\u00f3dulo demuestra la versatilidad del sistema al manejar dos tipos de fuentes de datos para una misma entidad.</p>"},{"location":"features_client/#logica-de-seleccion-de-fuente","title":"L\u00f3gica de Selecci\u00f3n de Fuente","text":"<p>El controlador decide autom\u00e1ticamente si procesar un archivo subido o incrustar una URL externa.</p> <pre><code>if (isset($_FILES['video_file']) &amp;&amp; validFile($_FILES['video_file'])) {\n    // Caso A: Almacenamiento Local\n    $fileName = uniqid('video_') . '.mp4';\n    move_uploaded_file($tmpName, $destPath);\n    $finalSource = $destPath;\n} else if (!empty($videoUrl)) {\n    // Caso B: Referencia Externa (YouTube)\n    $finalSource = $videoUrl;\n}\n</code></pre> <p>Los datos se almacenan en la tabla <code>tutorials</code>, normalizando ambos casos en el campo <code>video_url</code>.</p>"},{"location":"installation/","title":"Manual de Despliegue y Evaluaci\u00f3n","text":"<p>Esta gu\u00eda est\u00e1 dise\u00f1ada para facilitar la evaluaci\u00f3n del proyecto en un entorno local est\u00e1ndar utilizando XAMPP.</p>"},{"location":"installation/#requisitos-del-entorno","title":"Requisitos del Entorno","text":"<ul> <li>Software: XAMPP (Apache + PHP 8.1 o superior).</li> <li>Base de Datos: SQLite 3 (Nativa en PHP, no requiere servicio MySQL activo).</li> <li>Sistema Operativo: Windows 10/11.</li> </ul>"},{"location":"installation/#instrucciones-de-instalacion-paso-a-paso","title":"Instrucciones de Instalaci\u00f3n Paso a Paso","text":""},{"location":"installation/#1-ubicacion-de-archivos","title":"1. Ubicaci\u00f3n de Archivos","text":"<p>Copie la carpeta del proyecto <code>PROYECTOWEB</code> (o el contenido del repositorio) dentro del directorio ra\u00edz del servidor web: <code>C:\\xampp\\htdocs\\PROYECTOWEB</code></p>"},{"location":"installation/#2-verificacion-de-permisos","title":"2. Verificaci\u00f3n de Permisos","text":"<p>El sistema necesita crear y escribir en la base de datos y la carpeta de subidas. Aseg\u00farese de que las siguientes carpetas tengan permisos de escritura: *   <code>/db</code> (Aqu\u00ed se generar\u00e1 autom\u00e1ticamente <code>layerhub.sqlite</code>) *   <code>/public/uploads</code></p>"},{"location":"installation/#3-configuracion-de-acceso","title":"3. Configuraci\u00f3n de Acceso","text":"<p>El sistema ya viene preconfigurado para ejecutarse en la carpeta <code>/PROYECTOWEB</code>.</p> <p>Si abre el archivo <code>/php/includes/config.php</code>, ver\u00e1 la siguiente configuraci\u00f3n autom\u00e1tica:</p> <pre><code>// Detecci\u00f3n Autom\u00e1tica de Dominio\n$protocol = isset($_SERVER['HTTPS']) &amp;&amp; $_SERVER['HTTPS'] === 'on' ? \"https\" : \"http\";\n$host = $_SERVER['HTTP_HOST'];\ndefine('BASE_URL', \"$protocol://$host/PROYECTOWEB\");\n</code></pre> <p>Esto permite que el proyecto funcione inmediatamente al descomprimirlo en <code>htdocs/PROYECTOWEB</code>.</p>"},{"location":"installation/#ejecucion-y-pruebas","title":"Ejecuci\u00f3n y Pruebas","text":"<ol> <li>Inicie el m\u00f3dulo Apache en el panel de control de XAMPP.</li> <li>Abra su navegador y acceda a: <code>http://localhost/PROYECTOWEB/public/index.php</code>.</li> <li>Nota Importante: Al cargar la p\u00e1gina por primera vez, el sistema detectar\u00e1 que no existe la base de datos y ejecutar\u00e1 autom\u00e1ticamente el script de inicializaci\u00f3n (<code>config.php -&gt; initializeDatabase()</code>), creando todas las tablas e insertando los siguientes datos de prueba:</li> </ol>"},{"location":"installation/#datos-de-acceso-seeds","title":"Datos de Acceso (Seeds)","text":"Rol Usuario/Email Contrase\u00f1a Administrador <code>admin</code> / <code>admin@layerhub.com</code> <code>admin123</code> Cliente <code>cliente</code> / <code>cliente@layerhub.com</code> <code>cliente123</code>"},{"location":"installation/#visualizacion-de-documentacion-tecnica","title":"Visualizaci\u00f3n de Documentaci\u00f3n T\u00e9cnica","text":"<p>Para visualizar esta memoria t\u00e9cnica en formato web: 1.  Esta documentaci\u00f3n se encuentra generada est\u00e1ticamente en la URL del repositorio GitHub. 2.  Alternativamente, puede navegar por los archivos Markdown en la carpeta <code>/docs/</code> del proyecto entregado.</p>"},{"location":"security/","title":"Seguridad y Protocolos de Protecci\u00f3n","text":"<p>La seguridad en LayerHub se aborda desde el dise\u00f1o (\"Security by Design\"), implementando controles en cada capa de la aplicaci\u00f3n.</p>"},{"location":"security/#1-sanitizacion-de-datos-input-validation","title":"1. Sanitizaci\u00f3n de Datos (Input Validation)","text":"<p>Para prevenir ataques de tipo XSS (Cross-Site Scripting), ninguna entrada de usuario se conf\u00eda ciegamente. Se utiliza una funci\u00f3n global <code>sanitize()</code>:</p> <pre><code>function sanitize($data) {\n    // 1. Eliminar espacios innecesarios\n    // 2. Eliminar etiquetas HTML y PHP (strip_tags)\n    // 3. Convertir caracteres especiales a entidades HTML\n    return htmlspecialchars(strip_tags(trim($data)), ENT_QUOTES, 'UTF-8');\n}\n</code></pre> <p>Esta funci\u00f3n se aplica a todos los datos recibidos v\u00eda <code>$_POST</code> antes de ser procesados o almacenados.</p>"},{"location":"security/#2-gestion-de-contrasenas-bcrypt","title":"2. Gesti\u00f3n de Contrase\u00f1as (BCRYPT)","text":"<p>LayerHub cumple con los est\u00e1ndares modernos de criptograf\u00eda. Las contrase\u00f1as nunca se almacenan en texto plano.</p>"},{"location":"security/#registro","title":"Registro","text":"<pre><code>$passwordHash = password_hash($password, PASSWORD_BCRYPT);\n// Se almacena $passwordHash en la base de datos (60 caracteres)\n</code></pre>"},{"location":"security/#login","title":"Login","text":"<pre><code>if (password_verify($inputPassword, $storedHash)) {\n    // Contrase\u00f1a correcta\n    startUserSession($user);\n}\n</code></pre>"},{"location":"security/#3-proteccion-de-sesiones-anti-hijacking","title":"3. Protecci\u00f3n de Sesiones (Anti-Hijacking)","text":"<p>Para evitar que un atacante robe una sesi\u00f3n activa copiando la cookie <code>PHPSESSID</code>, el sistema vincula la sesi\u00f3n a la huella digital del navegador.</p> <pre><code>// session.php\nif ($_SESSION['user_agent'] !== $_SERVER['HTTP_USER_AGENT']) {\n    // Si el navegador cambia repentinamente, destruimos la sesi\u00f3n por seguridad\n    session_destroy();\n    exit('Error de seguridad: Sesi\u00f3n inv\u00e1lida');\n}\n</code></pre>"},{"location":"security/#4-control-de-acceso-middleware","title":"4. Control de Acceso (Middleware)","text":"<p>La funci\u00f3n <code>requireAdmin()</code> act\u00faa como barrera final. Ubicada al inicio de cada archivo sensible, garantiza que el c\u00f3digo protegido ni siquiera llegue a ejecutarse si el usuario no tiene las credenciales adecuadas.</p>"}]}