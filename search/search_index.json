{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Bienvenido a LayerHub Technical Docs","text":"<p>LayerHub es una plataforma integral para entusiastas de la impresi\u00f3n 3D. El sistema combina una tienda de hardware (impresoras, filamentos, accesorios) con una comunidad activa donde los usuarios pueden compartir modelos STL, tutoriales y valorarse entre s\u00ed.</p>"},{"location":"#vision-general","title":"\ud83d\ude80 Visi\u00f3n General","text":"<p>El proyecto ha sido construido utilizando una arquitectura LAMP/WAMP (Windows, Apache, MySQL/SQLite, PHP) con un enfoque en: - Experiencia de Usuario (UX) Premium: Dise\u00f1o limpio, moderno y responsive. - Seguridad Robusta: Control de acceso basado en roles y protecci\u00f3n de rutas. - Gesti\u00f3n de Comunidad: Sistema de seguidores, valoraciones y moderaci\u00f3n de contenido.</p>"},{"location":"#tecnologias-utilizadas","title":"\ud83d\udee0\ufe0f Tecnolog\u00edas Utilizadas","text":"Categor\u00eda Tecnolog\u00eda Backend PHP 8.x (Native) BBDD SQLite 3 Frontend HTML5, CSS3 (Vanilla), JavaScript Iconograf\u00eda FontAwesome 6 Estilos Modern UI con Flexbox y CSS Grid"},{"location":"#contenido-de-la-documentacion","title":"\ud83d\udcc2 Contenido de la Documentaci\u00f3n","text":"<p>En este portal encontrar\u00e1s: 1. Arquitectura: C\u00f3mo est\u00e1n organizados los archivos y c\u00f3mo se comunican. 2. Base de Datos: Esquema detallado y relaciones. 3. Funcionalidades: Detalle de la tienda y la comunidad. 4. Seguridad: C\u00f3mo protegemos los datos y el acceso.</p>"},{"location":"architecture/","title":"Arquitectura del Sistema","text":"<p>LayerHub utiliza una estructura modular que separa la l\u00f3gica del negocio de la presentaci\u00f3n visual.</p>"},{"location":"architecture/#estructura-de-directorios","title":"\ud83d\udcc2 Estructura de Directorios","text":"<pre><code>/\n\u251c\u2500\u2500 docs/               # Archivos fuente de esta documentaci\u00f3n (Markdown)\n\u251c\u2500\u2500 php/                # L\u00f3gica de Negocio (Backend)\n\u2502   \u251c\u2500\u2500 auth/           # Login, Registro y Logout\n\u2502   \u251c\u2500\u2500 community/      # Procesadores de subidas, ratings y follows\n\u2502   \u2514\u2500\u2500 includes/       # Configuraci\u00f3n global y gesti\u00f3n de sesiones\n\u251c\u2500\u2500 public/             # Archivos P\u00fablicos (Frontend)\n\u2502   \u251c\u2500\u2500 admin/          # Panel de Gesti\u00f3n Administrativo\n\u2502   \u251c\u2500\u2500 css/            # Estilos globales y espec\u00edficos\n\u2502   \u251c\u2500\u2500 images/         # Recursos gr\u00e1ficos y placeholders\n\u2502   \u251c\u2500\u2500 js/             # Scripts de interactividad\n\u2502   \u2514\u2500\u2500 uploads/        # Archivos subidos por usuarios (Modelos/Im\u00e1genes)\n\u251c\u2500\u2500 db/                 # Almacenamiento de la Base de Datos SQLite\n\u2514\u2500\u2500 mkdocs.yml          # Configuraci\u00f3n de este portal\n</code></pre>"},{"location":"architecture/#flujo-de-una-peticion-request","title":"\ud83d\udd04 Flujo de una Petici\u00f3n (Request)","text":"<p>Cuando un usuario interact\u00faa con la p\u00e1gina, el flujo sigue este patr\u00f3n:</p> <ol> <li>Interfaz: El usuario hace clic en una acci\u00f3n (ej: Comprar) en un archivo en <code>public/</code>.</li> <li>Controlador: Se env\u00eda una petici\u00f3n (GET/POST) a un archivo en <code>php/</code>.</li> <li>Seguridad: Se invoca <code>session.php</code> para verificar permisos.</li> <li>Base de Datos: El archivo PHP se comunica con <code>config.php</code> para realizar operaciones SQL.</li> <li>Respuesta: El servidor responde con una redirecci\u00f3n o un JSON (AJAX).</li> </ol>"},{"location":"architecture/#integracion-php","title":"\ud83e\udde9 Integraci\u00f3n PHP","text":"<p>Todos los archivos del sistema incluyen dos pilares fundamentales al inicio:</p> <pre><code>require_once __DIR__ . '/../php/includes/session.php'; // Gesti\u00f3n de sesiones\nrequire_once __DIR__ . '/../php/includes/config.php';  // Conexi\u00f3n y Helpers\n</code></pre> <ul> <li>session.php: Define si hay un usuario activo (<code>isLoggedIn()</code>) y sus roles.</li> <li>config.php: Centraliza la conexi\u00f3n PDO y funciones comunes como <code>sanitize()</code> y <code>redirect()</code>.</li> </ul>"},{"location":"database/","title":"Base de Datos y Modelo de Datos","text":"<p>LayerHub utiliza SQLite 3 para la persistencia de datos, lo que permite una configuraci\u00f3n r\u00e1pida sin necesidad de servidores de base de datos complejos.</p>"},{"location":"database/#diagrama-de-entidad-relacion","title":"\ud83d\udcca Diagrama de Entidad-Relaci\u00f3n","text":"<p>A continuaci\u00f3n se muestra c\u00f3mo se relacionan las entidades principales del sistema:</p> <pre><code>erDiagram\n    USERS ||--o{ POSTS : escribe\n    USERS ||--o{ ORDERS : realiza\n    USERS ||--o{ USER_FOLLOWS : seguidor\n    USERS ||--o{ USER_FOLLOWS : seguido\n    POSTS ||--o| STL_FILES : contiene\n    USERS ||--o{ RATINGS : valora\n    STL_FILES ||--o{ RATINGS : recibe\n    ORDERS ||--o{ ORDER_ITEMS : contiene\n    PRODUCTS ||--o{ ORDER_ITEMS : es_comprado\n    PRODUCTS ||--o{ CART : esta_en\n    USERS ||--o{ CART : tiene\n\n    USERS {\n        int id PK\n        string username\n        string role \"admin/user\"\n        int blocked\n    }\n    PRODUCTS {\n        int id PK\n        string title\n        float price\n        int stock\n    }\n    STL_FILES {\n        int id PK\n        int user_id FK\n        string file_path\n        string status \"pending/approved\"\n    }\n    ORDERS {\n        int id PK\n        int user_id FK\n        float total_amount\n        string status\n    }</code></pre>"},{"location":"database/#detalle-de-tablas-principales","title":"\ud83d\udccb Detalle de Tablas Principales","text":""},{"location":"database/#tabla-users","title":"Tabla <code>users</code>","text":"<p>Almacena los perfiles de usuario y sus credenciales (contrase\u00f1as hasheadas con BCRYPT). - <code>role</code>: Define si el usuario es <code>user</code> (cliente) o <code>admin</code>. - <code>blocked</code>: Flag binario para restringir el acceso a usuarios conflictivos.</p>"},{"location":"database/#tabla-products","title":"Tabla <code>products</code>","text":"<p>Define el cat\u00e1logo de la tienda. Los productos tienen stock din\u00e1mico que se descuenta autom\u00e1ticamente tras cada compra confirmada.</p>"},{"location":"database/#tabla-stl_files-y-posts","title":"Tabla <code>stl_files</code> y <code>posts</code>","text":"<p>Los archivos STL se vinculan a un <code>post</code> en la comunidad. Tienen un campo <code>status</code> que permite la moderaci\u00f3n previa por parte de un administrador antes de ser p\u00fablicos.</p>"},{"location":"database/#tabla-user_follows","title":"Tabla <code>user_follows</code>","text":"<p>Implementa la relaci\u00f3n muchos-a-muchos para el sistema de seguidores, permitiendo a los usuarios suscribirse a las actualizaciones de sus creadores favoritos.</p>"},{"location":"database/#persistencia","title":"\ud83d\udcbe Persistencia","text":"<p>La base de datos se encuentra f\u00edsicamente en <code>db/layerhub.sqlite</code>. El acceso se realiza a trav\u00e9s de PDO para prevenir inyecciones SQL mediante consultas preparadas.</p>"},{"location":"features/","title":"Funcionalidades del Sistema","text":"<p>LayerHub se divide en tres grandes \u00e1reas funcionales interconectadas.</p>"},{"location":"features/#tienda-e-commerce","title":"\ud83d\udecd\ufe0f Tienda (E-Commerce)","text":"<p>La tienda permite la adquisici\u00f3n de hardware y materiales de impresi\u00f3n 3D.</p> <ul> <li>Cat\u00e1logo Din\u00e1mico: Filtrado por categor\u00edas y b\u00fasqueda en tiempo real.</li> <li>Gesti\u00f3n de Stock: El sistema verifica la disponibilidad antes de permitir a\u00f1adir al carrito.</li> <li>Carrito de Compras: Persistente en base de datos para el usuario identificado.</li> <li>Workflow de Pedido:<ol> <li>Selecci\u00f3n de producto.</li> <li>Validaci\u00f3n de stock.</li> <li>Simulaci\u00f3n de pago seguro.</li> <li>Generaci\u00f3n de pedido y descuento de inventario.</li> </ol> </li> </ul>"},{"location":"features/#comunidad-maker","title":"\ud83d\udc65 Comunidad Maker","text":"<p>Inspirada en plataformas como Cults3D, permite la interacci\u00f3n social.</p> <ul> <li>Modelos STL: Los usuarios suben archivos que pasan por un proceso de moderaci\u00f3n.</li> <li>Tutoriales: Integraci\u00f3n con YouTube para compartir gu\u00edas t\u00e9cnicas.</li> <li>Sistema de Valoraci\u00f3n: Ratings de 1 a 5 estrellas con comentarios para cada modelo.</li> <li>Social: Funcionalidad de seguir/dejar de seguir a otros creadores.</li> </ul>"},{"location":"features/#panel-de-administracion","title":"\ud83d\udee0\ufe0f Panel de Administraci\u00f3n","text":"<p>El centro de control exclusivo para usuarios con rol <code>admin</code>.</p>"},{"location":"features/#gestion","title":"Gesti\u00f3n","text":"<ul> <li>Usuarios: Posibilidad de bloquear, eliminar o cambiar roles.</li> <li>Productos: CRUD completo (Crear, Leer, Actualizar, Borrar) de art\u00edculos de la tienda.</li> <li>Pedidos: Seguimiento y cambio de estado de las ventas.</li> </ul>"},{"location":"features/#moderacion","title":"Moderaci\u00f3n","text":"<ul> <li>Aprobaci\u00f3n de Contenido: El administrador debe revisar y aprobar cada STL o tutorial antes de que aparezca en la parte p\u00fablica.</li> <li>Limpieza: Capacidad de eliminar valoraciones ofensivas o contenido inapropiado.</li> </ul>"},{"location":"installation/","title":"Gu\u00eda de Instalaci\u00f3n y Despliegue","text":"<p>Sigue estos pasos para poner en marcha el portal de documentaci\u00f3n y el proyecto LayerHub.</p>"},{"location":"installation/#requisitos-previos","title":"\ud83d\udce5 Requisitos Previos","text":"<ul> <li>PHP 8.0 o superior.</li> <li>Servidor Web (Apache/Nginx) - Se recomienda XAMPP.</li> <li>Python 3.x (para ejecutar MkDocs).</li> </ul>"},{"location":"installation/#instalacion-de-la-documentacion","title":"\ud83d\udcd3 Instalaci\u00f3n de la Documentaci\u00f3n","text":"<p>Para visualizar este portal de forma interactiva y profesional:</p> <ol> <li> <p>Instalar MkDocs y el tema Material:    <pre><code>pip install mkdocs-material\n</code></pre></p> </li> <li> <p>Ejecutar el servidor local:    Desde la ra\u00edz del proyecto (<code>c:\\xampp\\htdocs</code>), ejecuta:    <pre><code>mkdocs serve\n</code></pre></p> </li> <li> <p>Ver en el navegador:    Abre http://127.0.0.1:8000.</p> </li> </ol>"},{"location":"installation/#publicar-en-internet-github-pages","title":"\ud83c\udf10 Publicar en Internet (GitHub Pages)","text":"<p>MkDocs tiene una funci\u00f3n integrada para crear un enlace web gratuito:</p> <ol> <li>Subir a GitHub: Aseg\u00farate de que tu proyecto est\u00e1 en un repositorio de GitHub.</li> <li> <p>Ejecutar despliegue:    <pre><code>mkdocs gh-deploy\n</code></pre>    Este comando compilar\u00e1 tu documentaci\u00f3n y la subir\u00e1 a una rama llamada <code>gh-pages</code>.</p> </li> <li> <p>Configuraci\u00f3n en GitHub:</p> </li> <li>Ve a tu repositorio en GitHub.com.</li> <li>Entra en Settings &gt; Pages.</li> <li>Aseg\u00farate de que la fuente es la rama <code>gh-pages</code>.</li> <li>\u00a1GitHub te dar\u00e1 una URL (ej: <code>https://tu-usuario.github.io/layerhub</code>) para que cualquiera pueda entrar!</li> </ol>"},{"location":"installation/#compilacion-estatica","title":"\ud83c\udfd7\ufe0f Compilaci\u00f3n Est\u00e1tica","text":"<p>Si quieres generar una versi\u00f3n HTML de esta documentaci\u00f3n para subirla a un servidor web: <pre><code>mkdocs build\n</code></pre> Esto crear\u00e1 una carpeta <code>site/</code> con todo el contenido listo para ser servido.</p>"},{"location":"security/","title":"Seguridad y Control de Roles","text":"<p>La seguridad es un pilar central en LayerHub. Se han implementado m\u00faltiples capas de protecci\u00f3n para asegurar la integridad de los datos y la privacidad de los usuarios.</p>"},{"location":"security/#mecanismos-de-proteccion","title":"\ud83d\udee1\ufe0f Mecanismos de Protecci\u00f3n","text":""},{"location":"security/#1-autenticacion-de-sesion","title":"1. Autenticaci\u00f3n de Sesi\u00f3n","text":"<p>El sistema utiliza sesiones nativas de PHP (<code>session_start()</code>) con configuraciones de seguridad adicionales en <code>php/includes/session.php</code>: - Regeneraci\u00f3n de ID: Se regenera el ID de sesi\u00f3n en cada login para prevenir ataques de Session Fixation. - Validaci\u00f3n de User-Agent: Se comprueba que el navegador no cambie durante la sesi\u00f3n para evitar el Hijacking. - Timeout Autom\u00e1tico: Las sesiones expiran tras 30 minutos de inactividad.</p>"},{"location":"security/#2-control-de-acceso-basado-en-roles-rbac","title":"2. Control de Acceso basado en Roles (RBAC)","text":"<p>Existen dos niveles principales de acceso:</p> Rol Alcance Verificaci\u00f3n P\u00fablico Solo login e index. N/A Cliente Tienda, Comunidad y Perfil. <code>requireLogin()</code> Admin Gesti\u00f3n total y Moderaci\u00f3n. <code>requireAdmin()</code>"},{"location":"security/#3-blindaje-de-la-url","title":"3. Blindaje de la URL","text":"<p>Para evitar que un usuario \"adivine\" una ruta y acceda sin permiso, cada controlador sensible incluye una guardia al inicio:</p> <pre><code>// En cualquier p\u00e1gina de administraci\u00f3n\nrequireAdmin(); // Si no es admin, redirige al login o lanza 403.\n\n// En la tienda o perfil\nrequireLogin(); // Si no hay sesi\u00f3n, env\u00eda al login.\n</code></pre>"},{"location":"security/#proteccion-de-datos","title":"\ud83d\udd12 Protecci\u00f3n de Datos","text":"<ul> <li>Inyecci\u00f3n SQL: El uso sistem\u00e1tico de <code>PDO</code> y par\u00e1metros enlazados (<code>bindValue</code>/<code>execute</code>) neutraliza ataques de inyecci\u00f3n.</li> <li>XSS (Cross-Site Scripting): Todas las salidas de datos en el HTML pasan por la funci\u00f3n <code>sanitize()</code> o <code>htmlspecialchars()</code>.</li> <li>Contrase\u00f1as: Nunca se guardan en texto plano. Se utiliza <code>password_hash()</code> con el algoritmo BCRYPT y se verifican con <code>password_verify()</code>.</li> </ul>"},{"location":"security/#usuarios-bloqueados","title":"\ud83d\udeab Usuarios Bloqueados","text":"<p>El sistema consulta en cada carga de p\u00e1gina cr\u00edtica si el usuario ha sido marcado como <code>blocked</code> en la base de datos. Si lo est\u00e1, la sesi\u00f3n se destruye instant\u00e1neamente y se le redirige al inicio.</p>"}]}